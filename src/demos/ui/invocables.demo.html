<!DOCTYPE html>
<meta charset="utf-8" />
<title>fields</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/style.css" id="theme" />

<script type="module">
  import trap from "../../42/fabric/type/error/trap.js"
  trap()
</script>

<script type="module">
  import ui from "../../42/ui.js"
  import filePicker from "../../42/ui/invocables/filePicker.js"
  import prompt from "../../42/ui/invocables/prompt.js"
  import alert from "../../42/ui/invocables/alert.js"
  import confirm from "../../42/ui/invocables/confirm.js"

  await ui({
    tag: "body.pa-xl",
    content: [
      {
        tag: "button",
        label: "Alert",
        async click() {
          console.log(await alert("Hello, alert"))
        },
      },
      {
        tag: "button",
        label: "Alert with icon",
        async click() {
          console.log(
            await alert("Hello, alert", { icon: "warning", agree: "Fine !" })
          )
        },
      },
      "\n\n",
      "\n\n",
      {
        tag: "button",
        label: "Confirm",
        async click() {
          console.log(await confirm("Do you confirm ?"))
        },
      },
      {
        tag: "button",
        label: "Confirm with icon and cutom buttons",
        async click() {
          console.log(
            await confirm("Do you confirm ?", {
              icon: "question",
              agree: { picto: "check", content: "Yep" },
              decline: { picto: "cross", content: "Nope" },
            })
          )
        },
      },
      "\n\n",
      "\n\n",
      {
        tag: "button",
        label: "Prompt",
        async click() {
          console.log(await prompt())
        },
      },
      {
        tag: "button",
        label: "Prompt with icon",
        async click() {
          console.log(
            await prompt(
              "What is the meaning of life,\nthe universe and everything?",
              { icon: "question", value: 42 }
            )
          )
        },
      },
      {
        tag: "button",
        label: "Prompt auto textarea",
        async click() {
          console.log(await prompt({ value: "A text\nwith newlines\n..." }))
        },
      },
      "\n\n",
      "\n\n",
      {
        tag: "button",
        label: "File Picker Open",
        async click() {
          console.log(await filePicker.open())
        },
      },
      {
        tag: "button",
        label: "File Picker Open (website/index.html)",
        async click() {
          console.log(
            await filePicker.open("/tests/fixtures/website/index.html")
          )
        },
      },
      "\n\n",
      {
        tag: "button",
        label: "File Picker Save",
        async click() {
          console.log(await filePicker.save())
        },
      },
      {
        tag: "button",
        label: 'File Picker Save with content "hello world"',
        async click() {
          console.log(await filePicker.save("/hello.txt", "hello world"))
        },
      },
    ],
  })

  import puppet from "../../42/core/dev/puppet.js"
  await puppet("button:nth-of-type(7)").click()
</script>
