<!DOCTYPE html>
<meta charset="utf-8" />
<title>transferable</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/style.css" id="theme" />

<!-- <script type="module">
  import trap from "../../../42/fabric/type/error/trap.js"
  trap()
</script> -->

<style>
  .demo {
    width: 450px;
  }

  .demo-xy {
    height: calc(18 * var(--unit));
  }
</style>

<body class="box-center panel pa-xl">
  <div>
    <!-- <h2>Drag to sort (Slide)</h2>
    <div class="demo demo-xy box-flex scroll-y pa-xl gap-xl inset paper">
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">1</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">2</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">3</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">4</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">5</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">6</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">7</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">8</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">9</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">10</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">11</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">12</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">13</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">14</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">15</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-200">16</span>
    </div>
    <div class="demo scroll-x d-flex pa-xl gap-xl inset paper">
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-400">1</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-400">2</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-400">3</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-green-400">4</span>
    </div>

    <br /> -->

    <h3>selectable</h3>
    <div
      class="demo demo-selectable demo-xy box-flex scroll-y pa-xl gap-xl inset paper">
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">1</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">2</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">3</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">4</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">5</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">6</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">7</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">8</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">9</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">10</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">11</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">12</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">13</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">14</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">15</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-200">16</span>
    </div>
    <div class="demo demo-selectable scroll-x d-flex pa-xl gap-xl inset paper">
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">1</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">2</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">3</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">4</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">5</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">6</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">7</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">8</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">9</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">10</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">11</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">12</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">13</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">14</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">15</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-400">16</span>
    </div>
    <div
      id="demo-small"
      class="demo demo-selectable scroll-x d-flex pa-xl gap-xl inset paper">
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-600">1</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-600">2</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-600">3</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-600">4</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-600">5</span>
      <span class="bd pa-xl font-mono bg-opacity-50 bg-yellow-600">6</span>
    </div>
  </div>

  <!-- <br />

  <h3>grid (not quite ready)</h3>
  <div class="demo scroll-x box-grid pa-xl gap-xl inset paper" style="--cols: 7">
    <span class="bd pa-xl">A</span>
    <span class="bd pa-xl">B</span>
    <span class="bd pa-xl">C</span>
    <span class="bd pa-xl">D</span>
    <span class="bd pa-xl">E</span>
    <span class="bd pa-xl">F</span>
    <span class="bd pa-xl">G</span>
  </div> -->
</body>

<script type="module">
  if (window.top === window.self) {
    const iframe = document.createElement("iframe")
    iframe.className = "inset paper size-full"

    iframe.srcdoc = document.documentElement.outerHTML
      .replaceAll('id="', 'id="iframe-')
      .replaceAll("green", "blue")
      .replaceAll("yellow", "red")
      .replaceAll("box-center panel", "box-center ground")
      .replace(/<!-{2} \[42] -{2}>[^\n]+/, "")

    document.body.append(iframe)
    document.body.classList.add("box-h")
    document.body.classList.add("box-fit")
  }
</script>

<script type="module">
  import transferable from "../../../42/ui/traits/transferable.js"
  import selectable from "../../../42/ui/traits/selectable.js"
  import inIframe from "../../../42/core/env/realm/inIframe.js"

  for (const item of document.querySelectorAll(".demo")) {
    transferable(item)
  }

  for (const item of document.querySelectorAll(".demo-selectable")) {
    selectable(item)
  }

  const demoSmall = document.querySelector(
    inIframe ? "#iframe-demo-small" : "#demo-small"
  )
  const selectableInstance = demoSmall[Symbol.for("Trait.INSTANCES")].selectable
  selectableInstance.add(demoSmall.querySelector(":scope > :nth-child(1)"))
  selectableInstance.add(demoSmall.querySelector(":scope > :nth-child(3)"))
  selectableInstance.add(demoSmall.querySelector(":scope > :nth-child(5)"))
</script>
