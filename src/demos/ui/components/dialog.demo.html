<!DOCTYPE html>
<meta charset="utf-8" />
<title>ui-dialog</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/style.css" id="theme" />

<script type="module">
  import trap from "../../../42/fabric/type/error/trap.js"
  trap()
</script>

<script type="module">
  import ui from "../../../42/ui.js"

  await ui({
    tag: "body.desktop",
    content: [
      { tag: "button", content: "{{cnt}}++", click: "{{cnt++}}" },
      {
        tag: "button#dialog",
        content: "dialog",
        dialog: {
          label: "Live Dialog",
          animate: { translate: "0 -100%", opacity: 0 },
          content: [
            {
              tag: ".box-v.ctrl-group.w-ctrl",
              content: [
                {
                  tag: "number",
                  scope: "x",
                  compact: true,
                },
                {
                  tag: "number",
                  scope: "y",
                  compact: true,
                },
              ],
            },
            {
              tag: "number",
              scope: "cnt",
              compact: true,
            },
            {
              tag: "button",
              content: "{{cnt}}++",
              click: "{{cnt++}}",
            },
          ],
        },
      },
    ],
    state: {
      cnt: 42,
    },
  })

  document.querySelector("button#dialog")?.click()

  // import listen from "../../../42/fabric/event/listen.js"
  // import sleep from "../../../42/fabric/type/promise/sleep.js"

  // // import log from "../../../42/core/log.js"
  // // listen({
  // //   click() {
  // //     setTimeout(() => {
  // //       log(app.data)
  // //     }, 0)
  // //   },
  // // })

  // setTimeout(() => {
  //   document.querySelector("button#dialog")?.click()
  //   // document.querySelector("button#dialog")?.click()
  // }, 100)

  // let closed

  // listen({
  //   async uidialogopen(e) {
  //     // console.log("uidialogopen", e)
  //     if (closed) return
  //     closed = true
  //     await sleep(500)
  //     // document.querySelector(".ui-dialog__close")?.click()
  //     e.target.close()
  //     document.querySelector("button#dialog")?.click()
  //   },
  //   // uidialogclose(e) {
  //   //   // e.preventDefault()
  //   //   console.log("uidialogclose", e)
  //   // },
  // })

  // // import dialog from "../../../42/ui/components/dialog.js"
  // // const res = await dialog({
  // //   x: 100,
  // //   label: "standalone",
  // //   content: "hello {{cnt}}",
  // //   state: { cnt: 42 },
  // // })
  // // console.log("res", res)
</script>
