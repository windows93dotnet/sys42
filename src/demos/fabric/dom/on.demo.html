<!DOCTYPE html>
<meta charset="utf-8" />
<title>on</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/style.css" id="theme" />

<script type="module">
  import trap from "../../../42/fabric/type/error/trap.js"
  trap()
</script>

<script type="module">
  import ui from "../../../42/ui.js"
  import on from "../../../42/fabric/dom/on.js"
  import keyboard from "../../../42/core/devices/keyboard.js"
  import automaton from "../../../42/core/dev/automaton.js"

  await ui([
    {
      tag: "button",
      content: "yo {{cnt}}",
      on: {
        Enter: "{{cnt++}}",
      },
      state: {
        cnt: 42,
      },
    },
  ])

  // listen({
  //   selector: "ui-sandbox",
  //   load(e, target) {
  //     console.log(e, target)
  //   },
  // })

  on({
    // "Control+click"() {
    //   console.log("Control+click")
    // },
    // "Control+Enter"() {
    //   console.log("Control+Enter")
    // },
    // "Control+p"() {
    //   console.log("Control+p")
    // },
    // // "Control+c Control+l"() {
    // //   console.log("Control+click")
    // // },
    // "click"() {
    //   console.log("click")
    // },
    // "Enter"() {
    //   console.log("Enter")
    // },
    // "Ctrl"() {
    //   console.log("Ctrl")
    // },
    "Ctrl+Enter"() {
      console.log("Ctrl+Enter")
    },
    // repeatable: true,
    // p() {
    //   console.log("p")
    // },
  })

  await automaton
    .keydown({ key: "Control", code: "ControlLeft" })
    .keydown({ key: "Enter", code: "Enter" })
    .done()

  // automaton.dispatch("keydown", { key: "p", code: "KeyP" })
  // automaton.dispatch("keydown", { key: "p", code: "KeyP", repeat: true })

  // globalThis.addEventListener("keydown", ({ key, code, isComposing }) => {
  //   console.log(key, code, isComposing)
  // })

  // console.log(document.querySelector("ui-sandbox iframe"))
</script>
