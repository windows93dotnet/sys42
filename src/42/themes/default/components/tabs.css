:root {
  --tabs__tab-fg: var(--btn-fg, var(--fg));
  --tabs__tab-bg: var(--btn-bg, var(--bg));
  --tabs__tab-pa: var(--btn-pa);
  --tabs__tab-bdw: var(--btn-bdw);
  --tabs__tab-bds: var(--btn-bds);
  --tabs__tab-bdc: var(--btn-bdc);
  --tabs__tab-bdi: var(--btn-bdi);
  --tabs__tab-br: var(--btn-br);
  --tabs__tab-tsh: var(--btn-tsh);
  --tabs__tab-bsh: var(--btn-bsh);

  --tabs__panel-fg: var(--panel-fg);
  --tabs__panel-bg: var(--panel-bg);
  --tabs__panel-pa: var(--unit-sm);
  --tabs__panel-bdw: var(--outset-bdw);
  --tabs__panel-bds: var(--outset-bds);
  --tabs__panel-bdc: var(--outset-bdc);
  --tabs__panel-bdi: var(--outset-bdi);
  --tabs__panel-br: var(--outset-br);
  --tabs__panel-tsh: var(--outset-tsh);
  --tabs__panel-bsh: var(--outset-bsh);

  --tabs-overlap: var(--tabs__tab-bdw);
  --tabs-gap: calc(-1 * var(--tabs__tab-bdw));
  --tabs-active-grow-y: var(--ctrl-py);
  --tabs-active-grow-x: var(--ctrl-px);
}

ui-tabs {
  display: flex;
  flex-direction: column;
  flex: 1 0 auto;
  max-height: 100%;
  max-width: 100%;
}

.ui-tabs__panels {
  flex: 1;
  max-height: 100%;
  overflow: hidden;

  display: flex;
  flex-direction: column;
}

.ui-tabs__panel {
  flex: 1;
  height: 100%;
  width: 100%;
  overflow: auto;

  color: var(--tabs__panel-fg);
  background: var(--tabs__panel-bg);
  padding: var(--tabs__panel-pa);
  border-width: var(--tabs__panel-bdw);
  border-style: var(--tabs__panel-bds, solid);
  border-color: var(--tabs__panel-bdc);
  border-image: var(--tabs__panel-bdi);
  border-radius: var(--tabs__panel-br);
  text-shadow: var(--tabs__panel-tsh, none);
  box-shadow: var(--tabs__panel-bsh);
}

.ui-tabs__tablist {
  position: relative;
  display: flex;
  flex-direction: row;
  overflow-x: auto;
  scrollbar-width: none;
}
.ui-tabs__tablist::-webkit-scrollbar { display: none; }

.ui-tabs__tablist:empty {
  border: 1px dashed;
  opacity: 0.4;
  min-height: 4ex;
}

.ui-tabs__tab {
  color: var(--tabs__tab-fg);
  background: var(--tabs__tab-bg);
  padding: var(--tabs__tab-pa);
  border-width: var(--tabs__tab-bdw);
  border-style: var(--tabs__tab-bds, solid);
  border-color: var(--tabs__tab-bdc);
  border-image: var(--tabs__tab-bdi);
  border-radius: var(--tabs__tab-br);
  text-shadow: var(--tabs__tab-tsh, none);
  box-shadow: var(--tabs__tab-bsh);

  max-width: var(--ctrl-w);
  min-width: 3ch;

  /* background-clip: padding-box; */
  column-gap: var(--unit-sm);

  user-select: none;
  /* will-change: transform; */
}

.ui-tabs__container {
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background-clip: padding-box;
  column-gap: var(--unit-sm);
  /* container: tab / inline-size; */
}

.ui-tabs__tab:focus-visible {
  outline: var(--ctrl-o);
  outline-offset: -5px;
}

.ui-tabs__label {
  flex: 1 1 0%;
  min-width: 0;

  display: inline-block;

  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  height: var(--picto-size);
}

.ui-tabs__close {
  background: transparent;
  padding: 0;
  border: 0;
  width: var(--picto-size);
  height: var(--picto-size);
  min-width: 0;
}

.ui-tabs__tab[aria-selected="true"] {
  flex: 0 0 min-content;
}

@container tab (max-width: 35px) {
  .ui-tabs__tab:not([aria-selected="true"]) .ui-tabs__close {
    display: none;
  }
}

/* balanced
=========== */

ui-tabs[balanced] .ui-tabs__tab,
ui-tabs[balanced] .ui-tabs__tab[aria-selected="true"] {
  flex: 1;
}

/* side
======= */

ui-tabs[side="left"], ui-tabs[side="right"] { flex-direction: row; }
ui-tabs[side="right"] { flex-direction: row-reverse; }
ui-tabs[side="bottom"] { flex-direction: column-reverse; }

:is(ui-tabs[side="left"], ui-tabs[side="right"]) > .ui-tabs__tablist {
  flex-direction: column;
}

/* top
------ */

ui-tabs:is(:not([side]), [side="top"]) > .ui-tabs__tablist {
  align-items: flex-end;
  padding-right: calc(-1 * var(--tabs-gap));
  bottom: calc(-1 * var(--tabs-overlap));
}

ui-tabs:is(:not([side]), [side="top"]) > .ui-tabs__tablist > .ui-tabs__tab[aria-selected="true"] {
  border-bottom-color: transparent;
  padding-top: var(--tabs-active-grow-y);
}

ui-tabs:is(:not([side]), [side="top"]) > .ui-tabs__tablist > .ui-tabs__tab {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
  margin-right: var(--tabs-gap);
}

ui-tabs:is(:not([side]), [side="top"]) > .ui-tabs__panels,
ui-tabs:is(:not([side]), [side="top"]) > .ui-tabs__panels > .ui-tabs__panel {
  border-top-left-radius: 0;
}

/* bottom
--------- */

ui-tabs[side="bottom"] > .ui-tabs__tablist {
  align-items: flex-start;
  padding-right: calc(-1 * var(--tabs-gap));
  top: calc(-1 * var(--tabs-overlap));
}

ui-tabs[side="bottom"] > .ui-tabs__tablist > .ui-tabs__tab[aria-selected="true"] {
  border-top-color: transparent;
  padding-bottom: var(--tabs-active-grow-y);
}

ui-tabs[side="bottom"] > .ui-tabs__tablist > .ui-tabs__tab {
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  margin-right: var(--tabs-gap);
}

ui-tabs[side="bottom"] > .ui-tabs__panels,
ui-tabs[side="bottom"] > .ui-tabs__panels > .ui-tabs__panel {
  border-bottom-left-radius: 0;
}

/* left
------- */

ui-tabs[side="left"] > .ui-tabs__tablist {
  align-items: flex-end;
  padding-bottom: calc(-1 * var(--tabs-gap));
  right: calc(-1 * var(--tabs-overlap));
}

ui-tabs[side="left"] > .ui-tabs__tablist > .ui-tabs__tab[aria-selected="true"] {
  border-right-color: transparent;
  padding-right: var(--tabs-active-grow-x);
}

ui-tabs[side="left"] > .ui-tabs__tablist > .ui-tabs__tab {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  margin-bottom: var(--tabs-gap);
}

ui-tabs[side="left"] > .ui-tabs__panels,
ui-tabs[side="left"] > .ui-tabs__panels > .ui-tabs__panel {
  border-top-left-radius: 0;
}

/* right
-------- */

ui-tabs[side="right"] > .ui-tabs__tablist {
  align-items: flex-start;
  padding-bottom: calc(-1 * var(--tabs-gap));
  left: calc(-1 * var(--tabs-overlap));
}

ui-tabs[side="right"] > .ui-tabs__tablist > .ui-tabs__tab[aria-selected="true"] {
  border-left-color: transparent;
  padding-left: var(--tabs-active-grow-x);
}

ui-tabs[side="right"] > .ui-tabs__tablist > .ui-tabs__tab {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  margin-bottom: var(--tabs-gap);
}

ui-tabs[side="right"] > .ui-tabs__panels,
ui-tabs[side="right"] > .ui-tabs__panels > .ui-tabs__panel {
  border-top-right-radius: 0;
}
