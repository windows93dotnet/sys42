<!DOCTYPE html>
<meta charset="utf-8" />
<title>42</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="/style.css" id="theme" />

<style>
  @import "./42/themes/default/fonts/tomo.css";

  :root {
  }
  body {
    --bg: #000;
    --fg: #0ff;
    overflow: hidden;
  }

  a,
  pre {
    font-family: tomo-web, monospace;
    font-size: calc(8px * 1);
    text-decoration: none;
    color: #0ff;
  }
  pre {
    line-height: 1.5;
    font-size: calc(8px * 1);
    width: min-content;
    height: min-content;
    display: block;
    margin: 0;
    overflow: hidden;
  }
  main a {
    pointer-events: auto;
    margin-bottom: 0.8rem;
  }
  main div a {
    display: block;
  }
  main div a:hover {
    color: #fff;
  }
</style>

<main class="box-fit box-center scroll-auto">
  <a href="/">
    <pre>
╷ ┌───┐
└─┤ ┌─┘
  └─┴─╴
    </pre>
  </a>
  <a href="/desktop/">desktop</a>
  <a href="/tests.html">tests</a>
  <br />
</main>

<script type="module">
  import trap from "./42/fabric/type/error/trap.js"
  trap()
</script>

<script type="module">
  import system from "./42/system.js"
  import fs from "./42/core/fs.js"
  import disk from "./42/core/disk.js"
  import create from "./42/ui/create.js"

  system.DEV = true

  const main = document.querySelector("main")
  const div = create("div")
  main.append(div)
  const CLEAN_REG = /^\/demos\/|(\.plugin)?\.demo\.html$/g

  disk.glob("**/*.demo.html").forEach((href) => {
    div.append(create("a", href.replace(CLEAN_REG, ""), { href }))
  })

  await fs.deleteDir(system.HOME + "/.ui").catch(() => {})

  // import explorer from "./42/ui/components/explorer.js"
  // explorer("/", { view: "tree" })
</script>

<script type="_module">
  import ui from "./42/ui.js"

  ui({
    tag: "ui-folder.box-fit",
    view: "tree",
    path: "/",
  })
</script>
